(function(){"use strict";var e={5040:function(e,t,a){var s=a(144),l=a(8620),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"app"},[a("appbar"),a("v-main",[a("router-view")],1)],1)},n=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$route.meta.visible?a("v-card",{staticClass:"appbar",attrs:{height:"100%",width:"200px"}},[a("v-navigation-drawer",[a("v-divider",{staticClass:"divider"}),a("v-tabs",{attrs:{"fixed-tabs":"",vertical:"",color:"#38BEC5"}},[a("v-tab",{on:{click:function(t){return e.route("providers")}}},[e._v("Поставщики")]),a("v-tab",{on:{click:function(t){return e.route("staff")}}},[e._v("Сотрудники")]),a("v-tab",{on:{click:function(t){return e.route("users")}}},[e._v("Клиенты")]),a("v-tab",{on:{click:function(t){return e.route("products")}}},[e._v("Товары")]),a("v-tab",{on:{click:function(t){return e.route("otchet")}}},[e._v("Отчёты")]),a("v-divider",{staticClass:"divider"}),a("v-tab",{on:{click:function(t){return e.route("supply")}}},[e._v("Поставки")]),a("v-tab",{on:{click:function(t){return e.route("refaund")}}},[e._v("Возврат")]),a("v-tab",{on:{click:function(t){return e.route("purchase")}}},[e._v("Продажа")])],1),a("v-divider",{staticClass:"divider"}),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-btn",{attrs:{width:"180px",outlined:"",rounded:"",color:"red"},on:{click:function(t){return e.exit()}}},[e._v("Выйти")])],1)],1)],1):e._e()},o=[],d={name:"AppBar",methods:{route(e){this.$router.push({name:`${e}`})},exit(){localStorage.removeItem("token"),this.route("auth")}}},c=d,u=a(1001),p=a(3453),h=a.n(p),f=a(680),v=a(3237),g=a(1418),m=a(6110),b=a(2877),_=a(4227),x=a(7168),y=(0,u.Z)(c,r,o,!1,null,null,null),$=y.exports;h()(y,{VBtn:f.Z,VCard:v.Z,VDivider:g.Z,VNavigationDrawer:m.Z,VRow:b.Z,VTab:_.Z,VTabs:x.Z});var w={name:"App",components:{Appbar:$},data:()=>({})},C=w,k=a(7524),Z=a(7877),V=(0,u.Z)(C,i,n,!1,null,null,null),F=V.exports;h()(V,{VApp:k.Z,VMain:Z.Z});var D=a(8345),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},E=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"elevation-4"},["otchet"!==e.$route.name?a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Поиск","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-btn",{staticClass:"table__btn_add",attrs:{fab:"",outlined:"","x-small":"",color:"rgba(39, 181, 214, 1)"},on:{click:function(t){return e.openDialog()}}},[a("v-icon",[e._v("mdi-plus")])],1)],1):e._e(),a("v-data-table",{staticClass:"table__data",attrs:{headers:e.headers,items:e.items,"items-per-page":e.rows,search:e.search},scopedSlots:e._u([{key:"item.edit",fn:function(t){var s=t.item;return[a("v-icon",{attrs:{color:"black"},on:{click:function(t){return e.editItem(s)}}},[e._v("mdi-pencil")])]}},{key:"item.delete",fn:function(t){var s=t.item;return[a("v-icon",{attrs:{color:"black"},on:{click:function(t){return e.deleteFunc(s)}}},[e._v("mdi-delete")])]}}])})],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("custom-dialog",{attrs:{selects:e.selects,addFunc:e.addFunc,editFunc:e.editFunc}})],1)],1)},U=[],I=a(629),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(e._s(e.title)),a("v-card-text",["Добавить сотрудника"===e.title?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.selects,label:"Должность",outlined:"",dense:""},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1)],1):e._e(),a("v-row",e._l(e.headers,(function(t,s){return a("v-col",{key:t.text,attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:t.text,type:t.type,outlined:"","hide-spin-buttons":""},model:{value:t.field,callback:function(a){e.$set(t,"field",a)},expression:"item.field"}})],1)})),1),a("v-card-actions",[a("v-spacer"),!1===e.status?a("v-btn",{attrs:{color:"rgba(39, 181, 214, 1)",text:""},on:{click:function(t){return e.addFunc(e.headers,e.select)}}},[e._v("Добавить")]):e._e(),!0===e.status?a("v-btn",{attrs:{color:"rgba(39, 181, 214, 1)",text:""},on:{click:function(t){return e.editFunc(e.headers,e.select)}}},[e._v("Редактировать")]):e._e(),a("v-btn",{attrs:{color:"rgba(39, 181, 214, 1)",text:""},on:{click:function(t){return e.cancel()}}},[e._v("Отмена")])],1)],1)],1)],1)},H=[],O={name:"custom-dialog",props:{selects:Array,addFunc:Function,editFunc:Function},data(){return{select:null}},watch:{headers(){return this.$store.getters.getHeaders}},methods:{...(0,I.nv)("dialog",["setVisible","setStatus","setDataDialog"]),cancel(){this.setVisible(!1),this.setStatus(!1),this.setStatus(!0)}},computed:{...(0,I.Se)("dialog",{title:"getTitle",status:"getStatus",headers:"getHeaders"})},mounted(){this.selects&&(this.select=this.selects[0])}},P=O,R=a(7118),B=a(2102),A=a(5670),M=a(3631),q=a(5978),Y=(0,u.Z)(P,j,H,!1,null,null,null),L=Y.exports;h()(Y,{VBtn:f.Z,VCard:v.Z,VCardActions:R.h7,VCardText:R.ZB,VCardTitle:R.EB,VCol:B.Z,VRow:b.Z,VSelect:A.Z,VSpacer:M.Z,VTextField:q.Z});var N={name:"CustomTable",props:{items:Array,headers:Array,rows:Number,status:String,selects:Array,addFunc:Function,editFunc:Function,deleteFunc:Function},data(){return{search:""}},components:{customDialog:L},methods:{...(0,I.nv)("dialog",["setVisible","setStatus","setDataDialog"]),openDialog(){this.setDataDialog({}),this.setStatus(!0),this.setStatus(!1),this.setVisible(!0)},editItem(e){this.setDataDialog(e),this.setStatus(!1),this.setStatus(!0),this.setVisible(!0)}},computed:{...(0,I.Se)("dialog",{dialogVisible:"getVisible"}),visible:{get(){return this.dialogVisible},set(e){this.setVisible(e),this.setStatus(!1),this.setStatus(!0)}}}},z=N,G=a(4998),J=a(4497),K=a(6428),Q=(0,u.Z)(z,T,U,!1,null,null,null),W=Q.exports;h()(Q,{VBtn:f.Z,VCard:v.Z,VCardTitle:R.EB,VDataTable:G.Z,VDialog:J.Z,VIcon:K.Z,VRow:b.Z,VTextField:q.Z});var X={name:"main-page",components:{Table:W}},ee=X,te=(0,u.Z)(ee,S,E,!1,null,null,null),ae=te.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"auth",attrs:{align:"center",justify:"center"}},[a("v-form",{staticClass:"auth-form"},[a("v-text-field",{staticClass:"auth-form-field",attrs:{solo:"",placeholder:"Логин",required:"","error-messages":e.loginErrors},on:{input:function(t){return e.$v.login.$reset()},blur:function(t){return e.$v.login.$touch()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validate()}},model:{value:e.$v.login.$model,callback:function(t){e.$set(e.$v.login,"$model",t)},expression:"$v.login.$model"}}),a("v-text-field",{staticClass:"auth-form-field",attrs:{solo:"",placeholder:"Пароль",required:"","error-messages":e.passwordErrors},on:{input:function(t){return e.$v.password.$reset()},blur:function(t){return e.$v.password.$touch()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validate()}},model:{value:e.$v.password.$model,callback:function(t){e.$set(e.$v.password,"$model",t)},expression:"$v.password.$model"}}),a("v-btn",{staticClass:"auth-form-btn",attrs:{rounded:"","aria-label":"Войти"},on:{click:function(t){return e.validate()}}},[e._v("Войти")])],1)],1)},le=[],ie=a(9669),ne=a.n(ie),re=a(379),oe={name:"auth-page",data(){return{login:null,password:null}},validations:{login:{required:re.C1},password:{required:re.C1,minLength:(0,re.Ei)(6)}},methods:{validate(){this.$v.$touch();const e=`${this.$baseUrl}api/user/registration?role=admin`,t={email:this.login,password:this.password};ne().post(e,t).then((e=>this.checkResponse(e))).catch((e=>console.error("error --- ",e)))},checkResponse(e){200===e.status&&(localStorage.setItem("token",e.data.token),this.$router.push({name:"providers"}))}},computed:{loginErrors(){const e=[];return this.$v.login.$dirty?(this.$v.login.required||e.push("Обязательное поле"),e):e},passwordErrors(){const e=[];return this.$v.password.$dirty?(this.$v.password.required||e.push("Обязательное поле"),this.$v.password.minLength||e.push("Пароль должен быть не менее 7 символов"),e):e}}},de=oe,ce=a(6232),ue=(0,u.Z)(de,se,le,!1,null,null,null),pe=ue.exports;h()(ue,{VBtn:f.Z,VForm:ce.Z,VRow:b.Z,VTextField:q.Z});var he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Table",{attrs:{headers:e.headers,rows:e.rows,items:e.providers,addFunc:e.addFunc,editFunc:e.editFunc,deleteFunc:e.deleteFunc}})},fe=[],ve={name:"providers-page",data(){return{providers:[],rows:15,headers:[{text:"Фирма",align:"start",sortable:!1,value:"name"},{text:"Телефон",value:"phone"},{text:"Почта",value:"email"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Фирма",value:"name"},{text:"Телефон",value:"phone",type:"number"},{text:"Почта",value:"email"}]}},components:{Table:W},computed:{...(0,I.Se)("dialog",{data:"getData"})},methods:{...(0,I.nv)("dialog",["setHeadersDialog","setVisible"]),addFunc(e){const t=`${this.$baseUrl}api/provider/create`,a={};e.forEach(((e,t)=>{if(e.value){let s=null,l=null;s=e.value,e.field&&(l=0===t?e.field[0].toUpperCase()+e.field.slice(1,e.field.length):e.field),a[s]=l}})),ne().post(t,a).then((e=>{200===e.status&&(this.setVisible(!1),this.handler(e.data))})).catch((e=>console.log(e)))},editFunc(e){const t=`${this.$baseUrl}api/provider/edit`,a={};e.forEach(((e,t)=>{const s=e.value;let l;e.field&&(l=0===t?e.field[0].toUpperCase()+e.field.slice(1,e.field.length):e.field),a[s]=l})),a.id=this.data.id,ne().post(t,a).then((e=>{if(200===e.status){this.setVisible(!1);const t=this.providers.indexOf(this.data);this.providers.splice(t,1),this.handler(e.data)}})).catch((e=>console.log(e)))},deleteFunc(e){const t=this.providers.indexOf(e),a=`${this.$baseUrl}api/provider/delete`,s={id:e.id};ne().post(a,s).then((e=>{200===e.status&&this.providers.splice(t,1)})).catch((e=>console.log(e)))},getInfo(){const e=`${this.$baseUrl}api/provider/get`;ne().get(e).then((e=>{this.providers=e.data.rows})).catch((e=>console.log(e)))},handler(e){console.log(e),this.providers.push(e)}},created(){this.getInfo(),this.setHeadersDialog({title:"Добавить поставщика",headers:this.dialogHeaders})}},ge=ve,me=(0,u.Z)(ge,he,fe,!1,null,null,null),be=me.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Table",{attrs:{headers:e.headers,rows:e.rows,items:e.staff,selects:e.selects,addFunc:e.addFunc,editFunc:e.editFunc,deleteFunc:e.deleteFunc}})},xe=[],ye={name:"staff-page",data(){return{staff:[],title:"Добавить сотрудника",rows:15,headers:[{text:"Фио",align:"start",value:"fio"},{text:"Должность",value:"role"},{text:"Дата рождения",value:"date"},{text:"Адрес",value:"addres"},{text:"Телефон",value:"phone"},{text:"Почта",value:"email"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Почта",value:"email"},{text:"Пароль",value:"password"},{text:"Фио",value:"fio"},{text:"Дата рождения",value:"date",type:"date"},{text:"Телефон",value:"phone",type:"number"},{text:"Адрес",value:"addres"}],selects:[{text:"Продавец",value:"Продавец"},{text:"Менеджер",value:"Менеджер"}]}},components:{Table:W},computed:{...(0,I.Se)("dialog",{data:"getData"})},methods:{...(0,I.nv)("dialog",["setHeadersDialog","setVisible"]),addFunc(e,t){const a=`${this.$baseUrl}api/user/createStaff`,s={};e.forEach(((e,t)=>{if(e.value){let a=null,l=null;a=e.value,e.field&&(l="date"===e.type?new Date(e.field).getTime():"number"===e.type||0===t||1===t?e.field:e.field[0].toUpperCase()+e.field.slice(1,e.field.length)),s[a]=l}})),t.value?s.role=t.value:s.role=t,e[1].field&&e[0].field&&ne().post(a,s).then((e=>{if(200===e.status){const t=[];t.push(e.data),this.handler(t)}})).catch((e=>console.log(e)))},editFunc(e,t){const a=`${this.$baseUrl}api/user/updateStaff`,s={};e.forEach(((e,t)=>{if(e.value){let a=null,l=null;a=e.value,e.field&&(l="date"===e.type?new Date(e.field).getTime():"number"===e.type||0===t||1===t?e.field:e.field[0].toUpperCase()+e.field.slice(1,e.field.length)),s[a]=l}})),t.value?s.role=t.value:s.role=t,s.id=this.data.id,ne().post(a,s).then((e=>{if(200===e.status){this.setVisible(!1);const t=this.staff.indexOf(this.data);this.staff.splice(t,1);const a=[];a.push(e.data),this.handler(a)}})).catch((e=>console.log(e)))},deleteFunc(e){const t=this.staff.indexOf(e),a=`${this.$baseUrl}api/user/deleteStaff`,s={id:e.id};ne().post(a,s).then((e=>{200===e.status&&this.staff.splice(t,1)})).catch((e=>console.log(e)))},getInfo(){const e=`${this.$baseUrl}api/user/getStaff?role=Продавец&role=Менеджер`;ne().get(e).then((e=>this.handler(e.data))).catch((e=>console.log(e)))},handler(e){const t=this.datehandler(e);this.staff.push(...t)},datehandler(e){const t=[];return e.forEach(((e,a)=>{t.push(e);let s=new Date(e.date).getDate();s<10&&(s=`0${s}`);let l=new Date(e.date).getMonth()+1;l<10&&(l=`0${l}`);const i=`${s}.${l}.${new Date(e.date).getFullYear()}г`;t[a].date=i})),t}},created(){this.getInfo(),this.setHeadersDialog({title:"Добавить сотрудника",headers:this.dialogHeaders})}},$e=ye,we=(0,u.Z)($e,_e,xe,!1,null,null,null),Ce=we.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Table",{attrs:{headers:e.table,items:e.user,rows:e.rows,addFunc:e.addFunc,editFunc:e.editFunc,deleteFunc:e.deleteFunc}})},Ze=[],Ve={name:"users-page",data(){return{user:[],title:"Добавить клиента",rows:15,table:[{text:"Фио",align:"start",value:"fio"},{text:"Телефон",value:"phone"},{text:"Дата заказа",value:"date"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Фио",value:"fio",type:"text"},{text:"Телефон",value:"phone",type:"number"},{text:"Дата заказа",value:"date",type:"date"}]}},components:{Table:W},computed:{...(0,I.Se)("dialog",{data:"getData"})},methods:{...(0,I.nv)("dialog",["setHeadersDialog","setVisible"]),addFunc(e){const t=`${this.$baseUrl}api/user/createClient`,a={};e.forEach((e=>{const t=e.value;let s;e.field&&(s="date"===e.type?new Date(e.field).getTime():"number"===e.type?e.field:e.field[0].toUpperCase()+e.field.slice(1,e.field.length)),a[t]=s})),ne().post(t,a).then((e=>{if(200===e.status){this.setVisible(!1);const t=[];t.push(e.data),this.handler(t)}})).catch((e=>console.log(e)))},editFunc(e){const t=`${this.$baseUrl}api/user/updateClient`,a={};e.forEach(((e,t)=>{const s=e.value;let l;e.field&&(l=0===t?e.field[0].toUpperCase()+e.field.slice(1,e.field.length):e.field),a[s]=l})),a.id=this.data.id,ne().post(t,a).then((e=>{if(200===e.status){this.setVisible(!1);const t=this.user.indexOf(this.data);this.user.splice(t,1);const a=[];a.push(e.data),this.handler(a)}})).catch((e=>console.log(e)))},deleteFunc(e){const t=`${this.$baseUrl}api/user/deleteClient`,a=this.user.indexOf(e),s={id:e.id};ne().post(t,s).then((e=>{200===e.status&&this.user.splice(a,1)})).catch((e=>console.log(e)))},getInfo(){const e=`${this.$baseUrl}api/user/getUsers`;ne().get(e).then((e=>this.handler(e.data.rows))).catch((e=>console.log(e)))},handler(e){const t=this.datehandler(e);this.user.push(...t)},datehandler(e){const t=[];return e.forEach(((e,a)=>{t.push(e);let s=new Date(e.date).getDate();s<10&&(s=`0${s}`);let l=new Date(e.date).getMonth()+1;l<10&&(l=`0${l}`);const i=`${s}.${l}.${new Date(e.date).getFullYear()}г`;t[a].date=i})),t}},created(){this.getInfo(),this.setHeadersDialog({title:"Добавить клиентов",headers:this.dialogHeaders})}},Fe=Ve,De=(0,u.Z)(Fe,ke,Ze,!1,null,null,null),Se=De.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Table",{attrs:{items:e.products,headers:e.headers,rows:e.rows,addFunc:e.addFunc,editFunc:e.editFunc,deleteFunc:e.deleteFunc}})},Te=[],Ue={name:"products-page",data(){return{products:[],category:null,count:null,rows:15,headers:[{text:"Наименование",value:"name",field:"",align:"start",sortable:!1},{text:"Категория",value:"category"},{text:"Количество",value:"count"},{text:"Цена за 1ед",value:"price"},{text:"Общая стоимость",value:"total"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Наименование",value:"name",field:"",align:"start",sortable:!1},{text:"Категория",value:"category",field:""},{text:"Количество",value:"count",field:"",type:"number"},{text:"Цена за 1ед",value:"price",field:"",type:"number"}]}},components:{Table:W},computed:{...(0,I.Se)("dialog",{data:"getData"})},methods:{...(0,I.nv)("dialog",["setHeadersDialog","setVisible"]),addFunc(e){const t=`${this.$baseUrl}api/product/create`,a={};e.forEach((e=>{let t=null;t="number"!==e.type?e.field[0].toUpperCase()+e.field.slice(1,e.field.length):e.field;const s=e.value,l=t;a[s]=l})),ne().post(t,a).then((e=>{if(200===e.status){this.setVisible(!1);const t=e.data.products;t.category=e.data.category,this.products.push(t),this.$store.dispatch("setProducts",this.products)}})).catch((e=>console.log(e)))},editFunc(e){const t=`${this.$baseUrl}api/product/update`,a={};e.forEach((e=>{let t=null;t="number"!==e.type?e.field[0].toUpperCase()+e.field.slice(1,e.field.length):e.field;const s=e.value,l=t;a[s]=l})),a.id=this.data.id,ne().post(t,a).then((e=>{if(200===e.status){this.setVisible(!1);const t=this.products.indexOf(this.data);this.products.splice(t,1);const a=e.data.products;a.category=e.data.category,this.products.push(a),this.$store.dispatch("setProducts",this.products),this.handlerOne(e)}})).catch((e=>console.log(e)))},deleteFunc(e){const t=this.products.indexOf(e),a=`${this.$baseUrl}api/product/delete`,s={id:e.id};ne().post(a,s).then((e=>{200===e.status&&this.products.splice(t,1)})).catch((e=>console.log(e)))},getInfo(){const e=`${this.$baseUrl}api/product/get`;ne().get(e).then((e=>this.handler(e))).catch((e=>console.log(e)))},handler(e){this.category=e.data.category.rows,this.$store.dispatch("setCategory",this.category),this.count=e.data.products.count,this.$store.dispatch("setCount",this.count),this.products=e.data.products.rows;for(let t=0;t<this.count;t+=1){const e=this.category.find((e=>e.id===this.products[t].categoryId));this.products[t].category=e.name}this.$store.dispatch("setProducts",this.products)}},created(){this.getInfo(),this.setHeadersDialog({title:"Добавить товар",headers:this.dialogHeaders})}},Ie=Ue,je=(0,u.Z)(Ie,Ee,Te,!1,null,null,null),He=je.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"otcher",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"otchet__container"},[a("v-autocomplete",{staticClass:"otchet__container__field",attrs:{label:"Вид отчета",items:e.types,dense:"","hide-details":"",outlined:""},model:{value:e.otchetType,callback:function(t){e.otchetType=t},expression:"otchetType"}}),a("v-text-field",{staticClass:"otchet__container__field",attrs:{type:"date",label:"Дата начала",dense:"","hide-details":"",outlined:""},model:{value:e.dateStart,callback:function(t){e.dateStart=t},expression:"dateStart"}}),a("v-text-field",{staticClass:"otchet__container__field",attrs:{type:"date",label:"Дата конца",dense:"","hide-details":"",outlined:""},model:{value:e.dateEnd,callback:function(t){e.dateEnd=t},expression:"dateEnd"}}),a("v-btn",{staticClass:"otchet__container__btn",attrs:{outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(t){return e.create()}}},[e._v("Создать отчёт")])],1),a("Table",{attrs:{headers:e.headers,rows:e.rows,items:e.data}})],1)},Pe=[],Re={name:"otchet-page",data(){return{providers:[],otchetType:null,dateStart:null,dateEnd:null,rows:15,types:[{text:"Поставки"},{text:"Продажи"},{text:"Возвраты"}],headers:[{text:"Поставщик",align:"start",sortable:!1,value:"provaider"},{text:"Товар",value:"name"},{text:"Поступило",value:"count"}],data:[]}},components:{Table:W},methods:{create(){let e=null;switch(console.log(this.otchetType),this.otchetType){case"Поставки":e=`${this.$baseUrl}api/supply/getOtchet`;break;default:e=null}const t={dateStart:new Date(this.dateStart),dateEnd:new Date(this.dateEnd)};ne().post(e,t).then((e=>{e.data.forEach((e=>{console.log(e);const t=this.data.findIndex((t=>t.name===e.name));console.log(t),-1===t?this.data.push(e):this.data[t].count+=e.count})),this.handler(this.data)})).catch((e=>console.log(e)))},handler(e){e.forEach(((e,t)=>{const a=this.providers.findIndex((t=>t.id===e.providerId));-1!==a&&(this.data[t].provaider=this.providers[a].name),console.log(e)}))},getInfo(){const e=`${this.$baseUrl}api/provider/get`;ne().get(e).then((e=>{this.providers=e.data.rows,console.log(this.providers)})).catch((e=>console.log(e)))}},created(){this.getInfo()}},Be=Re,Ae=a(1835),Me=(0,u.Z)(Be,Oe,Pe,!1,null,"5fef6d62",null),qe=Me.exports;h()(Me,{VAutocomplete:Ae.Z,VBtn:f.Z,VCard:v.Z,VRow:b.Z,VTextField:q.Z});var Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"supply"},[a("v-row",{staticClass:"supply__row",attrs:{align:"center",justify:"space-between"}},[a("v-autocomplete",{staticClass:"supply__field_right",attrs:{label:"Поставщик",items:e.providers,"item-text":e.selectItem,dense:"","hide-details":"",outlined:""},model:{value:e.provider,callback:function(t){e.provider=t},expression:"provider"}}),a("v-text-field",{staticClass:"supply__field_left supply__field_right",attrs:{label:"Дата",readonly:"",dense:"","hide-details":"",outlined:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-text-field",{staticClass:"supply__field_left",attrs:{value:"",label:"Сотрудник",readonly:"",dense:"","hide-details":"",outlined:""},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1),e._l(e.createdRows,(function(t,s){return a("v-expansion-panels",{key:t.id,attrs:{align:"center",justify:"space-around"}},[a("v-expansion-panel",[a("v-expansion-panel-header",[a("v-row",{attrs:{align:"center",justify:"center"}},[e._v("Дата поставки - "+e._s(t.time))])],1),a("v-expansion-panel-content",{staticClass:"panel"},[a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-text-field",{staticClass:"panel__field",attrs:{label:"Наименование",dense:"",outlined:"","hide-details":""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),a("v-autocomplete",{staticClass:"panel__field",attrs:{label:"Категория",items:e.categorys,"item-text":e.selectItem,dense:"",outlined:"","hide-details":""},model:{value:t.category,callback:function(a){e.$set(t,"category",a)},expression:"item.category"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Количество",dense:"",outlined:"","hide-details":""},model:{value:t.count,callback:function(a){e.$set(t,"count",a)},expression:"item.count"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Цена",dense:"",outlined:"","hide-details":""},model:{value:t.price,callback:function(a){e.$set(t,"price",a)},expression:"item.price"}})],1),a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-btn",{staticClass:"panel__btn",attrs:{outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(a){return e.editFunc(t)}}},[e._v("Редактировать")]),a("v-btn",{staticClass:"panel__btn",attrs:{outlined:"",color:"red"},on:{click:function(a){return e.deleteFunc(t)}}},[e._v("Удалить")])],1)],1)],1)],1)})),e._l(e.rows,(function(t,s){return a("v-expansion-panels",{key:t.id,attrs:{align:"center",justify:"space-around"}},[a("v-expansion-panel",[a("v-expansion-panel-header",[a("v-row",{staticClass:"date",attrs:{align:"center",justify:"center"}},[e._v("Поставка - "+e._s(e.hours)+":"+e._s(e.minutes)+":"+e._s(e.seconds))])],1),a("v-expansion-panel-content",{staticClass:"panel"},[a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-text-field",{staticClass:"panel__field",attrs:{label:"Наименование",dense:"",outlined:"","hide-details":""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),a("v-autocomplete",{staticClass:"panel__field",attrs:{label:"Категория",items:e.categorys,"item-text":e.selectItem,dense:"",outlined:"","hide-details":""},model:{value:t.category,callback:function(a){e.$set(t,"category",a)},expression:"item.category"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Количество",dense:"",outlined:"","hide-details":""},model:{value:t.count,callback:function(a){e.$set(t,"count",a)},expression:"item.count"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Цена",dense:"",outlined:"","hide-details":""},model:{value:t.price,callback:function(a){e.$set(t,"price",a)},expression:"item.price"}})],1),a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-btn",{staticClass:"panel__btn",attrs:{outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(a){return e.createFunc(t)}}},[e._v("Создать")])],1)],1)],1)],1)})),a("v-row",{staticClass:"add__row",attrs:{align:"center",justify:"end"}},[a("v-btn",{staticClass:"add__row__btn",attrs:{fab:"",outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(t){return e.add()}}},[a("v-icon",[e._v("mdi-plus")])],1)],1)],2)],1)},Le=[],Ne={name:"supply-page",data(){return{title:"Добавить поставку",id:0,name:null,category:null,price:null,count:null,time:null,provider:null,user:null,providers:[],categorys:[],createdRows:[],rows:[],hours:0,minutes:0,seconds:0}},components:{Table:W},computed:{date(){let e=(new Date).getDate();e<10&&(e=`0${e}`);let t=(new Date).getMonth()+1;t<10&&(t=`0${t}`);const a=(new Date).getFullYear(),s=`${e}.${t}.${a}`;return s}},methods:{setTime(){setInterval((()=>{const e=new Date;let t=e.getHours(),a=e.getMinutes(),s=e.getSeconds();t=t<=9?`${t}`.padStart(2,0):t,a=a<=9?`${a}`.padStart(2,0):a,s=s<=9?`${s}`.padStart(2,0):s,this.hours=t,this.minutes=a,this.seconds=s}),1e3)},selectItem(e){return e.name},getInfo(){let e=`${this.$baseUrl}api/provider/get`;ne().get(e).then((e=>{this.providers=e.data.rows})).catch((e=>console.log(e))),e=`${this.$baseUrl}api/product/getCategory`,ne().get(e).then((e=>{this.categorys=e.data})).catch((e=>console.log(e))),e=`${this.$baseUrl}api/supply/get`,ne().get(e).then((e=>{this.createdRows=e.data,this.createdRows.forEach(((e,t)=>{let a=new Date(e.date).getMinutes(),s=new Date(e.date).getHours(),l=new Date(e.date).getDate(),i=new Date(e.date).getMonth();const n=new Date(e.date).getFullYear();a=a<=9?`${a}`.padStart(2,0):a,s=s<=9?`${s}`.padStart(2,0):s,l=l<=9?`${l}`.padStart(2,0):l,i=i+1<=9?`${i+1}`.padStart(2,0):i+1;const r=`${l}.${i}.${n}  ${s}:${a}`;this.createdRows[t].time=r}))})).catch((e=>console.log(e)))},add(){this.rows.push({id:this.id}),this.id+=1},createFunc(e){const t=`${this.$baseUrl}api/supply/create`;let a={};a=e,a.date=new Date,a.provider=this.provider,a.user=this.user,a.total=a.price*a.count,ne().post(t,a).then((e=>console.log(e))).catch((e=>console.log(e)))},editFunc(){},deleteFunc(e){const t=`${this.$baseUrl}api/supply/delete`,a={id:e.id};ne().post(t,a).then((t=>{if(200===t.status){const t=this.createdRows.indexOf(e);this.createdRows.splice(t,1)}})).catch((e=>console.log(e)))}},mounted(){this.setTime()},created(){this.getInfo()}},ze=Ne,Ge=a(6845),Je=a(2443),Ke=a(1192),Qe=a(5630),We=(0,u.Z)(ze,Ye,Le,!1,null,null,null),Xe=We.exports;h()(We,{VAutocomplete:Ae.Z,VBtn:f.Z,VCard:v.Z,VExpansionPanel:Ge.Z,VExpansionPanelContent:Je.Z,VExpansionPanelHeader:Ke.Z,VExpansionPanels:Qe.Z,VIcon:K.Z,VRow:b.Z,VTextField:q.Z});var et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"supply"},[a("v-row",{staticClass:"supply__row",attrs:{align:"center",justify:"space-around"}},[a("v-text-field",{staticClass:"supply__field_right",attrs:{label:"Возврат",disabled:"",dense:"","hide-details":"",outlined:""}}),a("v-btn",{attrs:{fab:"",outlined:"","x-small":"",color:"rgba(39, 181, 214, 1)"},on:{click:function(t){return e.add()}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),e._l(e.rows,(function(e,t){return a("v-text-field",{key:e.id,staticClass:"supply__row",attrs:{dense:"",outlined:"","hide-details":""}})}))],2)],1)},tt=[],at={name:"supply-page",data(){return{title:"Добавить поставку",id:0,rows:[]}},components:{Table:W},computed:{items(){return this.$store.getters.getuser}},methods:{add(){this.rows.push({id:this.id}),this.id+=1}},created(){this.getInfo()}},st=at,lt=(0,u.Z)(st,et,tt,!1,null,null,null),it=lt.exports;h()(lt,{VBtn:f.Z,VCard:v.Z,VIcon:K.Z,VRow:b.Z,VTextField:q.Z});var nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"supply"},[a("v-row",{staticClass:"supply__row",attrs:{align:"center",justify:"space-around"}},[a("v-text-field",{staticClass:"supply__field_right",attrs:{label:"Продажи",disabled:"",dense:"","hide-details":"",outlined:""}}),a("v-btn",{attrs:{fab:"",outlined:"","x-small":"",color:"rgba(39, 181, 214, 1)"},on:{click:function(t){return e.add()}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),e._l(e.rows,(function(e,t){return a("v-text-field",{key:e.id,staticClass:"supply__row",attrs:{dense:"",outlined:"","hide-details":""}})}))],2)],1)},rt=[],ot={name:"supply-page",data(){return{title:"Добавить поставку",id:0,rows:[]}},components:{Table:W},computed:{items(){return this.$store.getters.getuser}},methods:{add(){this.rows.push({id:this.id}),this.id+=1}},created(){this.getInfo()}},dt=ot,ct=(0,u.Z)(dt,nt,rt,!1,null,null,null),ut=ct.exports;h()(ct,{VBtn:f.Z,VCard:v.Z,VIcon:K.Z,VRow:b.Z,VTextField:q.Z}),s.Z.use(D.Z);const pt=[{path:"/",name:"main-page",component:ae,meta:{visible:!0}},{path:"/auth",name:"auth",component:pe},{path:"/providers",name:"providers",component:be,meta:{visible:!0}},{path:"/staff",name:"staff",component:Ce,meta:{visible:!0}},{path:"/users",name:"users",component:Se,meta:{visible:!0}},{path:"/products",name:"products",component:He,meta:{visible:!0}},{path:"/otchet",name:"otchet",component:qe,meta:{visible:!0,tableHeader:!1}},{path:"/supply",name:"supply",component:Xe,meta:{visible:!0}},{path:"/refaund",name:"refaund",component:it,meta:{visible:!0}},{path:"/purchase",name:"purchase",component:ut,meta:{visible:!0}}],ht=new D.Z({mode:"history",base:"/",routes:pt});ht.beforeEach(((e,t,a)=>{"auth"===e.name&&localStorage.getItem("token")?a({name:"providers"}):a(),"main-page"===e.name&&a({name:"providers"}),localStorage.getItem("token")?a():a({name:"auth"})}));var ft=ht;const vt={visible:null,status:!1,title:null,headers:null,data:null},gt={getVisible:()=>vt.visible,getStatus:()=>vt.status,getTitle:()=>vt.title,getHeaders:()=>vt.headers,getData:()=>vt.data},mt={setVisible({commit:e},t){e("setVisible",t)},setStatus({commit:e},t){e("setStatus",t)},setHeadersDialog({commit:e},t){e("setHeadersDialog",t)},setDataDialog({commit:e},t){e("setDataDialog",t)}},bt={setVisible(e,t){vt.visible=t},setStatus(e,t){vt.status=t},setDataDialog(e,t){vt.data=t,vt.headers.forEach(((e,a)=>{switch(e.value){case"name":vt.headers[a].field=t.name;break;case"fio":vt.headers[a].field=t.fio;break;case"phone":vt.headers[a].field=t.phone;break;case"email":vt.headers[a].field=t.email;break;case"date":vt.headers[a].field=t.date;break;case"addres":vt.headers[a].field=t.addres;break;case"category":vt.headers[a].field=t.category;break;case"count":vt.headers[a].field=t.count;break;case"price":vt.headers[a].field=t.price;break;case"total":vt.headers[a].field=t.total;break;default:vt.headers[a].field=""}}))},setHeadersDialog(e,t){t.title&&(vt.title=t.title),t.headers&&(vt.headers=t.headers)}};var _t={namespaced:!0,state:vt,getters:gt,mutations:bt,actions:mt};const xt={setCount(e,t){e.count=t},setCategory(e,t){e.category=t},setProducts(e,t){e.products=t}},yt={setProducts({commit:e},t){e("setProducts",t)},setCategory({commit:e},t){e("setCategory",t)},setCount({commit:e},t){e("setCount",t)}},$t={getProducts:e=>e.products,getCategory:e=>e.category,getCount:e=>e.count},wt={products:null,category:null,count:null,edit:null,delete:null};var Ct={state:wt,mutations:xt,getters:$t,actions:yt};const kt={setUsers(e,t){e.users=t},addUsers(e,t){e.users.push(t)}},Zt={setUsers({commit:e},t){e("setUsers",t)},addUsers({commit:e},t){e("addUsers",t)}},Vt={getUsers:e=>e.users},Ft={users:null};var Dt={state:Ft,mutations:kt,getters:Vt,actions:Zt};s.Z.use(I.ZP);var St=new I.ZP.Store({modules:{dialog:_t,products:Ct,users:Dt}}),Et=a(9132);s.Z.use(Et.Z);var Tt=new Et.Z({});s.Z.use(l.ZP),s.Z.config.productionTip=!1,s.Z.prototype.$baseUrl="http://трио.site:8888/",new s.Z({router:ft,store:St,vuetify:Tt,render:e=>e(F)}).$mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,i){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],l=e[c][1],i=e[c][2];for(var r=!0,o=0;o<s.length;o++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(r=!1,i<n&&(n=i));if(r){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,l,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,i,n=s[0],r=s[1],o=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(o)var c=o(a)}for(t&&t(s);d<n.length;d++)i=n[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},s=self["webpackChunktrio"]=self["webpackChunktrio"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5040)}));s=a.O(s)})();
//# sourceMappingURL=app.d7f7a60d.js.map