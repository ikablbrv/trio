(function(){"use strict";var t={5040:function(t,e,a){a(6992),a(8674),a(9601),a(7727);var n=a(144),s=a(8620),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"app"},[a("appbar"),a("v-main",[a("router-view")],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$route.meta.visible?a("v-card",{staticClass:"appbar",attrs:{height:"100%",width:"200px"}},[a("v-navigation-drawer",[a("v-divider",{staticClass:"divider"}),a("v-tabs",{attrs:{"fixed-tabs":"",vertical:"",color:"#38BEC5"}},[a("v-tab",{on:{click:function(e){return t.route("providers")}}},[t._v("Поставщики")]),a("v-tab",{on:{click:function(e){return t.route("staff")}}},[t._v("Сотрудники")]),a("v-tab",{on:{click:function(e){return t.route("users")}}},[t._v("Клиенты")]),a("v-tab",{on:{click:function(e){return t.route("products")}}},[t._v("Товары")]),a("v-tab",{on:{click:function(e){return t.route("otchet")}}},[t._v("Отчёты")]),a("v-divider",{staticClass:"divider"}),a("v-tab",{on:{click:function(e){return t.route("supply")}}},[t._v("Поставки")]),a("v-tab",{on:{click:function(e){return t.route("refaund")}}},[t._v("Возврат")]),a("v-tab",{on:{click:function(e){return t.route("purchase")}}},[t._v("Продажа")])],1),a("v-divider",{staticClass:"divider"}),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-btn",{attrs:{width:"180px",outlined:"",rounded:"",color:"red"},on:{click:function(e){return t.exit()}}},[t._v("Выйти")])],1)],1)],1):t._e()},l=[],c={name:"AppBar",methods:{route:function(t){this.$router.push({name:"".concat(t)})},exit:function(){localStorage.removeItem("token"),this.route("auth")}}},u=c,d=a(1001),f=a(3453),p=a.n(f),h=a(680),v=a(3237),g=a(1418),m=a(6110),b=a(2877),_=a(4227),x=a(6269),y=(0,d.Z)(u,o,l,!1,null,null,null),w=y.exports;p()(y,{VBtn:h.Z,VCard:v.Z,VDivider:g.Z,VNavigationDrawer:m.Z,VRow:b.Z,VTab:_.Z,VTabs:x.Z});var Z={name:"App",components:{Appbar:w},data:function(){return{}}},C=Z,$=a(7524),k=a(7877),V=(0,d.Z)(C,i,r,!1,null,null,null),F=V.exports;p()(V,{VApp:$.Z,VMain:k.Z});a(8309);var D=a(8345),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},E=[],T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"elevation-4"},["otchet"!==t.$route.name?a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Поиск","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-btn",{staticClass:"table__btn_add",attrs:{fab:"",outlined:"","x-small":"",color:"rgba(39, 181, 214, 1)"},on:{click:function(e){return t.openDialog()}}},[a("v-icon",[t._v("mdi-plus")])],1)],1):t._e(),a("v-data-table",{staticClass:"table__data",attrs:{headers:t.headers,items:t.items,"items-per-page":t.rows,search:t.search},scopedSlots:t._u([{key:"item.edit",fn:function(e){var n=e.item;return[a("v-icon",{attrs:{color:"black"},on:{click:function(e){return t.editItem(n)}}},[t._v("mdi-pencil")])]}},{key:"item.delete",fn:function(e){var n=e.item;return[a("v-icon",{attrs:{color:"black"},on:{click:function(e){return t.deleteFunc(n)}}},[t._v("mdi-delete")])]}}])})],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("custom-dialog",{attrs:{selects:t.selects,addFunc:t.addFunc,editFunc:t.editFunc}})],1)],1)},U=[],I=a(4367),j=(a(9653),a(629)),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v(t._s(t.title)),a("v-card-text",["Добавить сотрудника"===t.title?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:t.selects,label:"Должность",outlined:"",dense:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)],1):t._e(),a("v-row",t._l(t.headers,(function(e,n){return a("v-col",{key:e.text,attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:e.text,type:e.type,outlined:"","hide-spin-buttons":""},model:{value:e.field,callback:function(a){t.$set(e,"field",a)},expression:"item.field"}})],1)})),1),a("v-card-actions",[a("v-spacer"),!1===t.status?a("v-btn",{attrs:{color:"rgba(39, 181, 214, 1)",text:""},on:{click:function(e){return t.addFunc(t.headers,t.select)}}},[t._v("Добавить")]):t._e(),!0===t.status?a("v-btn",{attrs:{color:"rgba(39, 181, 214, 1)",text:""},on:{click:function(e){return t.editFunc(t.headers,t.select)}}},[t._v("Редактировать")]):t._e(),a("v-btn",{attrs:{color:"rgba(39, 181, 214, 1)",text:""},on:{click:function(e){return t.cancel()}}},[t._v("Отмена")])],1)],1)],1)],1)},O=[],P={name:"custom-dialog",props:{selects:Array,addFunc:Function,editFunc:Function},data:function(){return{select:null}},watch:{headers:function(){return this.$store.getters.getHeaders}},methods:(0,I.Z)((0,I.Z)({},(0,j.nv)("dialog",["setVisible","setStatus","setDataDialog"])),{},{cancel:function(){this.setVisible(!1),this.setStatus(!1),this.setStatus(!0)}}),computed:(0,I.Z)({},(0,j.Se)("dialog",{title:"getTitle",status:"getStatus",headers:"getHeaders"})),mounted:function(){this.selects&&(this.select=this.selects[0])}},R=P,B=a(7118),A=a(2102),M=a(5670),q=a(3631),Y=a(5978),L=(0,d.Z)(R,H,O,!1,null,null,null),N=L.exports;p()(L,{VBtn:h.Z,VCard:v.Z,VCardActions:B.h7,VCardText:B.ZB,VCardTitle:B.EB,VCol:A.Z,VRow:b.Z,VSelect:M.Z,VSpacer:q.Z,VTextField:Y.Z});var z={name:"CustomTable",props:{items:Array,headers:Array,rows:Number,status:String,selects:Array,addFunc:Function,editFunc:Function,deleteFunc:Function},data:function(){return{search:""}},components:{customDialog:N},methods:(0,I.Z)((0,I.Z)({},(0,j.nv)("dialog",["setVisible","setStatus","setDataDialog"])),{},{openDialog:function(){this.setDataDialog({}),this.setStatus(!0),this.setStatus(!1),this.setVisible(!0)},editItem:function(t){this.setDataDialog(t),this.setStatus(!1),this.setStatus(!0),this.setVisible(!0)}}),computed:(0,I.Z)((0,I.Z)({},(0,j.Se)("dialog",{dialogVisible:"getVisible"})),{},{visible:{get:function(){return this.dialogVisible},set:function(t){this.setVisible(t),this.setStatus(!1),this.setStatus(!0)}}})},G=z,J=a(4998),K=a(4497),Q=a(6428),W=(0,d.Z)(G,T,U,!1,null,null,null),X=W.exports;p()(W,{VBtn:h.Z,VCard:v.Z,VCardTitle:B.EB,VDataTable:J.Z,VDialog:K.Z,VIcon:Q.Z,VRow:b.Z,VTextField:Y.Z});var tt={name:"main-page",components:{Table:X}},et=tt,at=(0,d.Z)(et,S,E,!1,null,null,null),nt=at.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"auth",attrs:{align:"center",justify:"center"}},[a("v-form",{staticClass:"auth-form"},[a("v-text-field",{staticClass:"auth-form-field",attrs:{solo:"",placeholder:"Логин",required:"","error-messages":t.loginErrors},on:{input:function(e){return t.$v.login.$reset()},blur:function(e){return t.$v.login.$touch()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validate()}},model:{value:t.$v.login.$model,callback:function(e){t.$set(t.$v.login,"$model",e)},expression:"$v.login.$model"}}),a("v-text-field",{staticClass:"auth-form-field",attrs:{solo:"",placeholder:"Пароль",required:"","error-messages":t.passwordErrors},on:{input:function(e){return t.$v.password.$reset()},blur:function(e){return t.$v.password.$touch()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validate()}},model:{value:t.$v.password.$model,callback:function(e){t.$set(t.$v.password,"$model",e)},expression:"$v.password.$model"}}),a("v-btn",{staticClass:"auth-form-btn",attrs:{rounded:"","aria-label":"Войти"},on:{click:function(e){return t.validate()}}},[t._v("Войти")])],1)],1)},it=[],rt=a(9669),ot=a.n(rt),lt=a(379),ct={name:"auth-page",data:function(){return{login:null,password:null}},validations:{login:{required:lt.C1},password:{required:lt.C1,minLength:(0,lt.Ei)(6)}},methods:{validate:function(){var t=this;this.$v.$touch();var e="".concat(this.$baseUrl,"api/user/registration?role=admin"),a={email:this.login,password:this.password};ot().post(e,a).then((function(e){return t.checkResponse(e)})).catch((function(t){return console.error("error --- ",t)}))},checkResponse:function(t){200===t.status&&(localStorage.setItem("token",t.data.token),this.$router.push({name:"providers"}))}},computed:{loginErrors:function(){var t=[];return this.$v.login.$dirty?(this.$v.login.required||t.push("Обязательное поле"),t):t},passwordErrors:function(){var t=[];return this.$v.password.$dirty?(this.$v.password.required||t.push("Обязательное поле"),this.$v.password.minLength||t.push("Пароль должен быть не менее 7 символов"),t):t}}},ut=ct,dt=a(6232),ft=(0,d.Z)(ut,st,it,!1,null,null,null),pt=ft.exports;p()(ft,{VBtn:h.Z,VForm:dt.Z,VRow:b.Z,VTextField:Y.Z});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{headers:t.headers,rows:t.rows,items:t.providers,addFunc:t.addFunc,editFunc:t.editFunc,deleteFunc:t.deleteFunc}})},vt=[],gt=(a(1539),a(4747),a(7042),a(561),{name:"providers-page",data:function(){return{providers:[],rows:15,headers:[{text:"Фирма",align:"start",sortable:!1,value:"name"},{text:"Телефон",value:"phone"},{text:"Почта",value:"email"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Фирма",value:"name"},{text:"Телефон",value:"phone",type:"number"},{text:"Почта",value:"email"}]}},components:{Table:X},computed:(0,I.Z)({},(0,j.Se)("dialog",{data:"getData"})),methods:(0,I.Z)((0,I.Z)({},(0,j.nv)("dialog",["setHeadersDialog","setVisible"])),{},{addFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/provider/create"),n={};t.forEach((function(t,e){if(t.value){var a=null,s=null;a=t.value,t.field&&(s=0===e?t.field[0].toUpperCase()+t.field.slice(1,t.field.length):t.field),n[a]=s}})),ot().post(a,n).then((function(t){200===t.status&&(e.setVisible(!1),e.handler(t.data))})).catch((function(t){return console.log(t)}))},editFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/provider/edit"),n={};t.forEach((function(t,e){var a,s=t.value;t.field&&(a=0===e?t.field[0].toUpperCase()+t.field.slice(1,t.field.length):t.field),n[s]=a})),n.id=this.data.id,ot().post(a,n).then((function(t){if(200===t.status){e.setVisible(!1);var a=e.providers.indexOf(e.data);e.providers.splice(a,1),e.handler(t.data)}})).catch((function(t){return console.log(t)}))},deleteFunc:function(t){var e=this,a=this.providers.indexOf(t),n="".concat(this.$baseUrl,"api/provider/delete"),s={id:t.id};ot().post(n,s).then((function(t){200===t.status&&e.providers.splice(a,1)})).catch((function(t){return console.log(t)}))},getInfo:function(){var t=this,e="".concat(this.$baseUrl,"api/provider/get");ot().get(e).then((function(e){t.providers=e.data.rows})).catch((function(t){return console.log(t)}))},handler:function(t){console.log(t),this.providers.push(t)}}),created:function(){this.getInfo(),this.setHeadersDialog({title:"Добавить поставщика",headers:this.dialogHeaders})}}),mt=gt,bt=(0,d.Z)(mt,ht,vt,!1,null,null,null),_t=bt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{headers:t.headers,rows:t.rows,items:t.staff,selects:t.selects,addFunc:t.addFunc,editFunc:t.editFunc,deleteFunc:t.deleteFunc}})},yt=[],wt=a(8932),Zt=(a(2222),{name:"staff-page",data:function(){return{staff:[],title:"Добавить сотрудника",rows:15,headers:[{text:"Фио",align:"start",value:"fio"},{text:"Должность",value:"role"},{text:"Дата рождения",value:"date"},{text:"Адрес",value:"addres"},{text:"Телефон",value:"phone"},{text:"Почта",value:"email"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Почта",value:"email"},{text:"Пароль",value:"password"},{text:"Фио",value:"fio"},{text:"Дата рождения",value:"date",type:"date"},{text:"Телефон",value:"phone",type:"number"},{text:"Адрес",value:"addres"}],selects:[{text:"Продавец",value:"Продавец"},{text:"Менеджер",value:"Менеджер"}]}},components:{Table:X},computed:(0,I.Z)({},(0,j.Se)("dialog",{data:"getData"})),methods:(0,I.Z)((0,I.Z)({},(0,j.nv)("dialog",["setHeadersDialog","setVisible"])),{},{addFunc:function(t,e){var a=this,n="".concat(this.$baseUrl,"api/user/createStaff"),s={};t.forEach((function(t,e){if(t.value){var a=null,n=null;a=t.value,t.field&&(n="date"===t.type?new Date(t.field).getTime():"number"===t.type||0===e||1===e?t.field:t.field[0].toUpperCase()+t.field.slice(1,t.field.length)),s[a]=n}})),e.value?s.role=e.value:s.role=e,t[1].field&&t[0].field&&ot().post(n,s).then((function(t){if(200===t.status){var e=[];e.push(t.data),a.handler(e)}})).catch((function(t){return console.log(t)}))},editFunc:function(t,e){var a=this,n="".concat(this.$baseUrl,"api/user/updateStaff"),s={};t.forEach((function(t,e){if(t.value){var a=null,n=null;a=t.value,t.field&&(n="date"===t.type?new Date(t.field).getTime():"number"===t.type||0===e||1===e?t.field:t.field[0].toUpperCase()+t.field.slice(1,t.field.length)),s[a]=n}})),e.value?s.role=e.value:s.role=e,s.id=this.data.id,ot().post(n,s).then((function(t){if(200===t.status){a.setVisible(!1);var e=a.staff.indexOf(a.data);a.staff.splice(e,1);var n=[];n.push(t.data),a.handler(n)}})).catch((function(t){return console.log(t)}))},deleteFunc:function(t){var e=this,a=this.staff.indexOf(t),n="".concat(this.$baseUrl,"api/user/deleteStaff"),s={id:t.id};ot().post(n,s).then((function(t){200===t.status&&e.staff.splice(a,1)})).catch((function(t){return console.log(t)}))},getInfo:function(){var t=this,e="".concat(this.$baseUrl,"api/user/getStaff?role=Продавец&role=Менеджер");ot().get(e).then((function(e){return t.handler(e.data)})).catch((function(t){return console.log(t)}))},handler:function(t){var e,a=this.datehandler(t);(e=this.staff).push.apply(e,(0,wt.Z)(a))},datehandler:function(t){var e=[];return t.forEach((function(t,a){e.push(t);var n=new Date(t.date).getDate();n<10&&(n="0".concat(n));var s=new Date(t.date).getMonth()+1;s<10&&(s="0".concat(s));var i="".concat(n,".").concat(s,".").concat(new Date(t.date).getFullYear(),"г");e[a].date=i})),e}}),created:function(){this.getInfo(),this.setHeadersDialog({title:"Добавить сотрудника",headers:this.dialogHeaders})}}),Ct=Zt,$t=(0,d.Z)(Ct,xt,yt,!1,null,null,null),kt=$t.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{headers:t.table,items:t.user,rows:t.rows,addFunc:t.addFunc,editFunc:t.editFunc,deleteFunc:t.deleteFunc}})},Ft=[],Dt={name:"users-page",data:function(){return{user:[],title:"Добавить клиента",rows:15,table:[{text:"Фио",align:"start",value:"fio"},{text:"Телефон",value:"phone"},{text:"Дата заказа",value:"date"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Фио",value:"fio",type:"text"},{text:"Телефон",value:"phone",type:"number"},{text:"Дата заказа",value:"date",type:"date"}]}},components:{Table:X},computed:(0,I.Z)({},(0,j.Se)("dialog",{data:"getData"})),methods:(0,I.Z)((0,I.Z)({},(0,j.nv)("dialog",["setHeadersDialog","setVisible"])),{},{addFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/user/createClient"),n={};t.forEach((function(t){var e,a=t.value;t.field&&(e="date"===t.type?new Date(t.field).getTime():"number"===t.type?t.field:t.field[0].toUpperCase()+t.field.slice(1,t.field.length)),n[a]=e})),ot().post(a,n).then((function(t){if(200===t.status){e.setVisible(!1);var a=[];a.push(t.data),e.handler(a)}})).catch((function(t){return console.log(t)}))},editFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/user/updateClient"),n={};t.forEach((function(t,e){var a,s=t.value;t.field&&(a=0===e?t.field[0].toUpperCase()+t.field.slice(1,t.field.length):t.field),n[s]=a})),n.id=this.data.id,ot().post(a,n).then((function(t){if(200===t.status){e.setVisible(!1);var a=e.user.indexOf(e.data);e.user.splice(a,1);var n=[];n.push(t.data),e.handler(n)}})).catch((function(t){return console.log(t)}))},deleteFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/user/deleteClient"),n=this.user.indexOf(t),s={id:t.id};ot().post(a,s).then((function(t){200===t.status&&e.user.splice(n,1)})).catch((function(t){return console.log(t)}))},getInfo:function(){var t=this,e="".concat(this.$baseUrl,"api/user/getUsers");ot().get(e).then((function(e){return t.handler(e.data.rows)})).catch((function(t){return console.log(t)}))},handler:function(t){var e,a=this.datehandler(t);(e=this.user).push.apply(e,(0,wt.Z)(a))},datehandler:function(t){var e=[];return t.forEach((function(t,a){e.push(t);var n=new Date(t.date).getDate();n<10&&(n="0".concat(n));var s=new Date(t.date).getMonth()+1;s<10&&(s="0".concat(s));var i="".concat(n,".").concat(s,".").concat(new Date(t.date).getFullYear(),"г");e[a].date=i})),e}}),created:function(){this.getInfo(),this.setHeadersDialog({title:"Добавить клиентов",headers:this.dialogHeaders})}},St=Dt,Et=(0,d.Z)(St,Vt,Ft,!1,null,null,null),Tt=Et.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{items:t.products,headers:t.headers,rows:t.rows,addFunc:t.addFunc,editFunc:t.editFunc,deleteFunc:t.deleteFunc}})},It=[],jt=(a(9826),{name:"products-page",data:function(){return{products:[],category:null,count:null,rows:15,headers:[{text:"Наименование",value:"name",field:"",align:"start",sortable:!1},{text:"Категория",value:"category"},{text:"Количество",value:"count"},{text:"Цена за 1ед",value:"price"},{text:"Общая стоимость",value:"total"},{text:"Редактировать",value:"edit",sortable:!1,align:"center"},{text:"Удалить",value:"delete",sortable:!1,align:"center"}],dialogHeaders:[{text:"Наименование",value:"name",field:"",align:"start",sortable:!1},{text:"Категория",value:"category",field:""},{text:"Количество",value:"count",field:"",type:"number"},{text:"Цена за 1ед",value:"price",field:"",type:"number"}]}},components:{Table:X},computed:(0,I.Z)({},(0,j.Se)("dialog",{data:"getData"})),methods:(0,I.Z)((0,I.Z)({},(0,j.nv)("dialog",["setHeadersDialog","setVisible"])),{},{addFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/product/create"),n={};t.forEach((function(t){var e=null;e="number"!==t.type?t.field[0].toUpperCase()+t.field.slice(1,t.field.length):t.field;var a=t.value,s=e;n[a]=s})),ot().post(a,n).then((function(t){if(200===t.status){e.setVisible(!1);var a=t.data.products;a.category=t.data.category,e.products.push(a),e.$store.dispatch("setProducts",e.products)}})).catch((function(t){return console.log(t)}))},editFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/product/update"),n={};t.forEach((function(t){var e=null;e="number"!==t.type?t.field[0].toUpperCase()+t.field.slice(1,t.field.length):t.field;var a=t.value,s=e;n[a]=s})),n.id=this.data.id,ot().post(a,n).then((function(t){if(200===t.status){e.setVisible(!1);var a=e.products.indexOf(e.data);e.products.splice(a,1);var n=t.data.products;n.category=t.data.category,e.products.push(n),e.$store.dispatch("setProducts",e.products),e.handlerOne(t)}})).catch((function(t){return console.log(t)}))},deleteFunc:function(t){var e=this,a=this.products.indexOf(t),n="".concat(this.$baseUrl,"api/product/delete"),s={id:t.id};ot().post(n,s).then((function(t){200===t.status&&e.products.splice(a,1)})).catch((function(t){return console.log(t)}))},getInfo:function(){var t=this,e="".concat(this.$baseUrl,"api/product/get");ot().get(e).then((function(e){return t.handler(e)})).catch((function(t){return console.log(t)}))},handler:function(t){var e=this;this.category=t.data.category.rows,this.$store.dispatch("setCategory",this.category),this.count=t.data.products.count,this.$store.dispatch("setCount",this.count),this.products=t.data.products.rows;for(var a=function(t){var a=e.category.find((function(a){return a.id===e.products[t].categoryId}));e.products[t].category=a.name},n=0;n<this.count;n+=1)a(n);this.$store.dispatch("setProducts",this.products)}}),created:function(){this.getInfo(),this.setHeadersDialog({title:"Добавить товар",headers:this.dialogHeaders})}}),Ht=jt,Ot=(0,d.Z)(Ht,Ut,It,!1,null,null,null),Pt=Ot.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"otcher",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"otchet__container"},[a("v-autocomplete",{staticClass:"otchet__container__field",attrs:{label:"Вид отчета",items:t.types,dense:"","hide-details":"",outlined:""},model:{value:t.otchetType,callback:function(e){t.otchetType=e},expression:"otchetType"}}),a("v-text-field",{staticClass:"otchet__container__field",attrs:{type:"date",label:"Дата начала",dense:"","hide-details":"",outlined:""},model:{value:t.dateStart,callback:function(e){t.dateStart=e},expression:"dateStart"}}),a("v-text-field",{staticClass:"otchet__container__field",attrs:{type:"date",label:"Дата конца",dense:"","hide-details":"",outlined:""},model:{value:t.dateEnd,callback:function(e){t.dateEnd=e},expression:"dateEnd"}}),a("v-btn",{staticClass:"otchet__container__btn",attrs:{outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(e){return t.create()}}},[t._v("Создать отчёт")])],1),a("Table",{attrs:{headers:t.headers,rows:t.rows,items:t.data}})],1)},Bt=[],At=(a(4553),{name:"otchet-page",data:function(){return{providers:[],otchetType:null,dateStart:null,dateEnd:null,rows:15,types:[{text:"Поставки"},{text:"Продажи"},{text:"Возвраты"}],headers:[{text:"Поставщик",align:"start",sortable:!1,value:"provaider"},{text:"Товар",value:"name"},{text:"Поступило",value:"count"}],data:[]}},components:{Table:X},methods:{create:function(){var t=this,e=null;switch(console.log(this.otchetType),this.otchetType){case"Поставки":e="".concat(this.$baseUrl,"api/supply/getOtchet");break;default:e=null}var a={dateStart:new Date(this.dateStart),dateEnd:new Date(this.dateEnd)};ot().post(e,a).then((function(e){e.data.forEach((function(e){console.log(e);var a=t.data.findIndex((function(t){return t.name===e.name}));console.log(a),-1===a?t.data.push(e):t.data[a].count+=e.count})),t.handler(t.data)})).catch((function(t){return console.log(t)}))},handler:function(t){var e=this;t.forEach((function(t,a){var n=e.providers.findIndex((function(e){return e.id===t.providerId}));-1!==n&&(e.data[a].provaider=e.providers[n].name),console.log(t)}))},getInfo:function(){var t=this,e="".concat(this.$baseUrl,"api/provider/get");ot().get(e).then((function(e){t.providers=e.data.rows,console.log(t.providers)})).catch((function(t){return console.log(t)}))}},created:function(){this.getInfo()}}),Mt=At,qt=a(1835),Yt=(0,d.Z)(Mt,Rt,Bt,!1,null,"5fef6d62",null),Lt=Yt.exports;p()(Yt,{VAutocomplete:qt.Z,VBtn:h.Z,VCard:v.Z,VRow:b.Z,VTextField:Y.Z});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"supply"},[a("v-row",{staticClass:"supply__row",attrs:{align:"center",justify:"space-between"}},[a("v-autocomplete",{staticClass:"supply__field_right",attrs:{label:"Поставщик",items:t.providers,"item-text":t.selectItem,dense:"","hide-details":"",outlined:""},model:{value:t.provider,callback:function(e){t.provider=e},expression:"provider"}}),a("v-text-field",{staticClass:"supply__field_left supply__field_right",attrs:{label:"Дата",readonly:"",dense:"","hide-details":"",outlined:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("v-text-field",{staticClass:"supply__field_left",attrs:{value:"",label:"Сотрудник",readonly:"",dense:"","hide-details":"",outlined:""},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),t._l(t.createdRows,(function(e,n){return a("v-expansion-panels",{key:e.id,attrs:{align:"center",justify:"space-around"}},[a("v-expansion-panel",[a("v-expansion-panel-header",[a("v-row",{attrs:{align:"center",justify:"center"}},[t._v("Дата поставки - "+t._s(e.time))])],1),a("v-expansion-panel-content",{staticClass:"panel"},[a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-text-field",{staticClass:"panel__field",attrs:{label:"Наименование",dense:"",outlined:"","hide-details":""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}}),a("v-autocomplete",{staticClass:"panel__field",attrs:{label:"Категория",items:t.categorys,"item-text":t.selectItem,dense:"",outlined:"","hide-details":""},model:{value:e.category,callback:function(a){t.$set(e,"category",a)},expression:"item.category"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Количество",dense:"",outlined:"","hide-details":""},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"item.count"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Цена",dense:"",outlined:"","hide-details":""},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1),a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-btn",{staticClass:"panel__btn",attrs:{outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(a){return t.editFunc(e)}}},[t._v("Редактировать")]),a("v-btn",{staticClass:"panel__btn",attrs:{outlined:"",color:"red"},on:{click:function(a){return t.deleteFunc(e)}}},[t._v("Удалить")])],1)],1)],1)],1)})),t._l(t.rows,(function(e,n){return a("v-expansion-panels",{key:e.id,attrs:{align:"center",justify:"space-around"}},[a("v-expansion-panel",[a("v-expansion-panel-header",[a("v-row",{staticClass:"date",attrs:{align:"center",justify:"center"}},[t._v("Поставка - "+t._s(t.hours)+":"+t._s(t.minutes)+":"+t._s(t.seconds))])],1),a("v-expansion-panel-content",{staticClass:"panel"},[a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-text-field",{staticClass:"panel__field",attrs:{label:"Наименование",dense:"",outlined:"","hide-details":""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}}),a("v-autocomplete",{staticClass:"panel__field",attrs:{label:"Категория",items:t.categorys,"item-text":t.selectItem,dense:"",outlined:"","hide-details":""},model:{value:e.category,callback:function(a){t.$set(e,"category",a)},expression:"item.category"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Количество",dense:"",outlined:"","hide-details":""},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"item.count"}}),a("v-text-field",{staticClass:"panel__field",attrs:{type:"number",label:"Цена",dense:"",outlined:"","hide-details":""},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1),a("v-row",{staticClass:"panel__field",attrs:{align:"center",justify:"center"}},[a("v-btn",{staticClass:"panel__btn",attrs:{outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(a){return t.createFunc(e)}}},[t._v("Создать")])],1)],1)],1)],1)})),a("v-row",{staticClass:"add__row",attrs:{align:"center",justify:"end"}},[a("v-btn",{staticClass:"add__row__btn",attrs:{fab:"",outlined:"",color:"rgba(39, 181, 214, 1)"},on:{click:function(e){return t.add()}}},[a("v-icon",[t._v("mdi-plus")])],1)],1)],2)],1)},zt=[],Gt=(a(3112),{name:"supply-page",data:function(){return{title:"Добавить поставку",id:0,name:null,category:null,price:null,count:null,time:null,provider:null,user:null,providers:[],categorys:[],createdRows:[],rows:[],hours:0,minutes:0,seconds:0}},components:{Table:X},computed:{date:function(){var t=(new Date).getDate();t<10&&(t="0".concat(t));var e=(new Date).getMonth()+1;e<10&&(e="0".concat(e));var a=(new Date).getFullYear(),n="".concat(t,".").concat(e,".").concat(a);return n}},methods:{setTime:function(){var t=this;setInterval((function(){var e=new Date,a=e.getHours(),n=e.getMinutes(),s=e.getSeconds();a=a<=9?"".concat(a).padStart(2,0):a,n=n<=9?"".concat(n).padStart(2,0):n,s=s<=9?"".concat(s).padStart(2,0):s,t.hours=a,t.minutes=n,t.seconds=s}),1e3)},selectItem:function(t){return t.name},getInfo:function(){var t=this,e="".concat(this.$baseUrl,"api/provider/get");ot().get(e).then((function(e){t.providers=e.data.rows})).catch((function(t){return console.log(t)})),e="".concat(this.$baseUrl,"api/product/getCategory"),ot().get(e).then((function(e){t.categorys=e.data})).catch((function(t){return console.log(t)})),e="".concat(this.$baseUrl,"api/supply/get"),ot().get(e).then((function(e){t.createdRows=e.data,t.createdRows.forEach((function(e,a){var n=new Date(e.date).getMinutes(),s=new Date(e.date).getHours(),i=new Date(e.date).getDate(),r=new Date(e.date).getMonth(),o=new Date(e.date).getFullYear();n=n<=9?"".concat(n).padStart(2,0):n,s=s<=9?"".concat(s).padStart(2,0):s,i=i<=9?"".concat(i).padStart(2,0):i,r=r+1<=9?"".concat(r+1).padStart(2,0):r+1;var l="".concat(i,".").concat(r,".").concat(o,"  ").concat(s,":").concat(n);t.createdRows[a].time=l}))})).catch((function(t){return console.log(t)}))},add:function(){this.rows.push({id:this.id}),this.id+=1},createFunc:function(t){var e="".concat(this.$baseUrl,"api/supply/create"),a={};a=t,a.date=new Date,a.provider=this.provider,a.user=this.user,a.total=a.price*a.count,ot().post(e,a).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},editFunc:function(){},deleteFunc:function(t){var e=this,a="".concat(this.$baseUrl,"api/supply/delete"),n={id:t.id};ot().post(a,n).then((function(a){if(200===a.status){var n=e.createdRows.indexOf(t);e.createdRows.splice(n,1)}})).catch((function(t){return console.log(t)}))}},mounted:function(){this.setTime()},created:function(){this.getInfo()}}),Jt=Gt,Kt=a(6845),Qt=a(2443),Wt=a(1192),Xt=a(5630),te=(0,d.Z)(Jt,Nt,zt,!1,null,null,null),ee=te.exports;p()(te,{VAutocomplete:qt.Z,VBtn:h.Z,VCard:v.Z,VExpansionPanel:Kt.Z,VExpansionPanelContent:Qt.Z,VExpansionPanelHeader:Wt.Z,VExpansionPanels:Xt.Z,VIcon:Q.Z,VRow:b.Z,VTextField:Y.Z});var ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"supply"},[a("v-row",{staticClass:"supply__row",attrs:{align:"center",justify:"space-around"}},[a("v-text-field",{staticClass:"supply__field_right",attrs:{label:"Возврат",disabled:"",dense:"","hide-details":"",outlined:""}}),a("v-btn",{attrs:{fab:"",outlined:"","x-small":"",color:"rgba(39, 181, 214, 1)"},on:{click:function(e){return t.add()}}},[a("v-icon",[t._v("mdi-plus")])],1)],1),t._l(t.rows,(function(t,e){return a("v-text-field",{key:t.id,staticClass:"supply__row",attrs:{dense:"",outlined:"","hide-details":""}})}))],2)],1)},ne=[],se={name:"supply-page",data:function(){return{title:"Добавить поставку",id:0,rows:[]}},components:{Table:X},computed:{items:function(){return this.$store.getters.getuser}},methods:{add:function(){this.rows.push({id:this.id}),this.id+=1}},created:function(){this.getInfo()}},ie=se,re=(0,d.Z)(ie,ae,ne,!1,null,null,null),oe=re.exports;p()(re,{VBtn:h.Z,VCard:v.Z,VIcon:Q.Z,VRow:b.Z,VTextField:Y.Z});var le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"table",attrs:{align:"start",justify:"center"}},[a("v-card",{staticClass:"supply"},[a("v-row",{staticClass:"supply__row",attrs:{align:"center",justify:"space-around"}},[a("v-text-field",{staticClass:"supply__field_right",attrs:{label:"Продажи",disabled:"",dense:"","hide-details":"",outlined:""}}),a("v-btn",{attrs:{fab:"",outlined:"","x-small":"",color:"rgba(39, 181, 214, 1)"},on:{click:function(e){return t.add()}}},[a("v-icon",[t._v("mdi-plus")])],1)],1),t._l(t.rows,(function(t,e){return a("v-text-field",{key:t.id,staticClass:"supply__row",attrs:{dense:"",outlined:"","hide-details":""}})}))],2)],1)},ce=[],ue={name:"supply-page",data:function(){return{title:"Добавить поставку",id:0,rows:[]}},components:{Table:X},computed:{items:function(){return this.$store.getters.getuser}},methods:{add:function(){this.rows.push({id:this.id}),this.id+=1}},created:function(){this.getInfo()}},de=ue,fe=(0,d.Z)(de,le,ce,!1,null,null,null),pe=fe.exports;p()(fe,{VBtn:h.Z,VCard:v.Z,VIcon:Q.Z,VRow:b.Z,VTextField:Y.Z}),n.Z.use(D.Z);var he=[{path:"/",name:"main-page",component:nt,meta:{visible:!0}},{path:"/auth",name:"auth",component:pt},{path:"/providers",name:"providers",component:_t,meta:{visible:!0}},{path:"/staff",name:"staff",component:kt,meta:{visible:!0}},{path:"/users",name:"users",component:Tt,meta:{visible:!0}},{path:"/products",name:"products",component:Pt,meta:{visible:!0}},{path:"/otchet",name:"otchet",component:Lt,meta:{visible:!0,tableHeader:!1}},{path:"/supply",name:"supply",component:ee,meta:{visible:!0}},{path:"/refaund",name:"refaund",component:oe,meta:{visible:!0}},{path:"/purchase",name:"purchase",component:pe,meta:{visible:!0}}],ve=new D.Z({mode:"history",base:"/",routes:he});ve.beforeEach((function(t,e,a){"auth"===t.name&&localStorage.getItem("token")?a({name:"providers"}):a(),"main-page"===t.name&&a({name:"providers"}),localStorage.getItem("token")?a():a({name:"auth"})}));var ge=ve,me={visible:null,status:!1,title:null,headers:null,data:null},be={getVisible:function(){return me.visible},getStatus:function(){return me.status},getTitle:function(){return me.title},getHeaders:function(){return me.headers},getData:function(){return me.data}},_e={setVisible:function(t,e){var a=t.commit;a("setVisible",e)},setStatus:function(t,e){var a=t.commit;a("setStatus",e)},setHeadersDialog:function(t,e){var a=t.commit;a("setHeadersDialog",e)},setDataDialog:function(t,e){var a=t.commit;a("setDataDialog",e)}},xe={setVisible:function(t,e){me.visible=e},setStatus:function(t,e){me.status=e},setDataDialog:function(t,e){me.data=e,me.headers.forEach((function(t,a){switch(t.value){case"name":me.headers[a].field=e.name;break;case"fio":me.headers[a].field=e.fio;break;case"phone":me.headers[a].field=e.phone;break;case"email":me.headers[a].field=e.email;break;case"date":me.headers[a].field=e.date;break;case"addres":me.headers[a].field=e.addres;break;case"category":me.headers[a].field=e.category;break;case"count":me.headers[a].field=e.count;break;case"price":me.headers[a].field=e.price;break;case"total":me.headers[a].field=e.total;break;default:me.headers[a].field=""}}))},setHeadersDialog:function(t,e){e.title&&(me.title=e.title),e.headers&&(me.headers=e.headers)}},ye={namespaced:!0,state:me,getters:be,mutations:xe,actions:_e},we={setCount:function(t,e){t.count=e},setCategory:function(t,e){t.category=e},setProducts:function(t,e){t.products=e}},Ze={setProducts:function(t,e){var a=t.commit;a("setProducts",e)},setCategory:function(t,e){var a=t.commit;a("setCategory",e)},setCount:function(t,e){var a=t.commit;a("setCount",e)}},Ce={getProducts:function(t){return t.products},getCategory:function(t){return t.category},getCount:function(t){return t.count}},$e={products:null,category:null,count:null,edit:null,delete:null},ke={state:$e,mutations:we,getters:Ce,actions:Ze},Ve={setUsers:function(t,e){t.users=e},addUsers:function(t,e){t.users.push(e)}},Fe={setUsers:function(t,e){var a=t.commit;a("setUsers",e)},addUsers:function(t,e){var a=t.commit;a("addUsers",e)}},De={getUsers:function(t){return t.users}},Se={users:null},Ee={state:Se,mutations:Ve,getters:De,actions:Fe};n.Z.use(j.ZP);var Te=new j.ZP.Store({modules:{dialog:ye,products:ke,users:Ee}}),Ue=a(9132);n.Z.use(Ue.Z);var Ie=new Ue.Z({});n.Z.use(s.ZP),n.Z.config.productionTip=!1,n.Z.prototype.$baseUrl="http://трио.site:8888/",new n.Z({router:ge,store:Te,vuetify:Ie,render:function(t){return t(F)}}).$mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,i){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],s=t[u][1],i=t[u][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,r=n[0],o=n[1],l=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var u=l(a)}for(e&&e(n);c<r.length;c++)i=r[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},n=self["webpackChunktrio"]=self["webpackChunktrio"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(5040)}));n=a.O(n)})();
//# sourceMappingURL=app-legacy.04663046.js.map